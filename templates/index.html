{% extends "base.html" %}
{% block content %}
<section class="panel">
  <h2>Upload Photos</h2>
  <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
    <div class="controls-row">
      <label for="mode">Processing mode</label>
      <select name="mode" id="mode">
        <option value="fit_crop" selected>Fit + Crop (fill screen)</option>
        <option value="fit">Resize to fit (letterbox)</option>
        <option value="crop">Center crop to screen</option>
      </select>
    </div>

    <label for="files" class="dropzone" id="dropzone">
      <input id="files" type="file" name="files" accept="image/*" multiple hidden />
      <span>Drag and drop photos here, or tap to choose files</span>
    </label>

    <button type="submit">Upload</button>
  </form>
</section>

<section class="panel">
  <div class="panel-title-row">
    <h2>Display Order</h2>
    <small>Drag cards to reorder</small>
  </div>

  {% if images %}
  <ul id="image-list" class="image-list">
    {% for image in images %}
    <li class="image-card" data-id="{{ image.id }}" draggable="true">
      <img src="/{{ image.processed_path }}" alt="{{ image.name }}" />
      <div class="card-meta">
        <strong>{{ image.name }}</strong>
        <span>Mode: {{ image.mode }}</span>
      </div>
      <form action="/delete/{{ image.id }}" method="post">
        <button class="danger" type="submit">Delete</button>
      </form>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No images uploaded yet.</p>
  {% endif %}
</section>
{% endblock %}
